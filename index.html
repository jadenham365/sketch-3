<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="utf-8">
		<title>Untitled</title>
<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
	</head>
	<body>
    
<script>
const noteIndex = ['A', 'A#', 'B', 'C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#'];
let scale = [];
let chordProg = [];
let bpm;
  
function chooseKey() {
  const startingNote = Math.trunc(Math.random() * 11.9999999999);
  let keyPattern = [];
  let patternCount = {1: 0, 2: 0};
  for (let i = 0; i<7; i++) {
    if (patternCount[1] === 2) {
      keyPattern.push(2);
      patternCount[2]++;
    } else if (patternCount[2] === 5){
        keyPattern.push(1);
        patternCount[1]++;
    } else {
      let number = Math.round((Math.random() + 1));
      keyPattern.push(number);
      patternCount[number]++;
    }
  }
  scale.push(noteIndex[startingNote]);
  let addIndex = startingNote
  for (i = 0; i<6; i++) {
    addIndex += keyPattern[i]
    scale.push(noteIndex[(addIndex % 12)])
  }
  console.log(scale);
}
  
function chooseChordProg() {
  for (let i = 0; i<4; i++) {
    let chord = [];
    for (let j = 0; j<3; j++) {
      let note = noteIndex[Math.trunc(Math.random() * 6.9999999999)];
      while (chord.includes(note)) {
        note = noteIndex[Math.trunc(Math.random() * 6.9999999999)];
      }
      chord.push(note);
    }
    chordProg.push(chord);
  }
  console.log(chordProg);
}

function setup() {
  
  chooseKey();
  chooseChordProg();
  
}

  
nn.on('load', setup);
    
</script>
		
	</body>
</html>
